{"version":3,"file":"main.js","mappings":"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","sources":["webpack://solhint/./node_modules/import-fresh/ sync","webpack://solhint/./node_modules/solhint/lib/config/ sync","webpack://solhint/./node_modules/solhint/lib/rules/ sync ^solhint\\-plugin\\-.*$","webpack://solhint/./src/app/App.tsx","webpack://solhint/./src/app/SolhintPluginClient.ts","webpack://solhint/./src/main.tsx","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/@solidity-parser/parser/dist|fs","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/cosmiconfig/dist|fs","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/cosmiconfig/dist|os","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/cosmiconfig/dist|path","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/fs.realpath|fs","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/fs.realpath|path","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/glob|fs","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/glob|path","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/import-fresh|path","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/path-type|fs","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/resolve-from|fs","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/resolve-from|module","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/resolve-from|path","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/solhint/lib/config|fs","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/solhint/lib/config|path","webpack://solhint/ignored|/home/circleci/remix-project/apps/solhint/node_modules/solhint/lib|fs"],"sourcesContent":["function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 2424;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 2070;\nmodule.exports = webpackEmptyContext;","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = () => ([]);\nwebpackEmptyContext.resolve = webpackEmptyContext;\nwebpackEmptyContext.id = 8803;\nmodule.exports = webpackEmptyContext;","import React, {useEffect, useState} from 'react'\nimport {SolHint} from './SolhintPluginClient'\n\nconst client = new SolHint()\n\nexport default function App() {\n  return <></>\n}\n","import { PluginClient } from '@remixproject/plugin'\nimport { createClient } from '@remixproject/plugin-webview'\nimport EventEmitter from 'events'\n// eslint-disable @nrwl/nx/enforce-module-boundaries\nimport { processStr } from 'solhint'\nimport { applyExtends } from 'solhint/lib/config/config-file'\nimport bestPractises from 'solhint/lib/rules/best-practises'\nimport naming from 'solhint/lib/rules/naming'\nimport order from 'solhint/lib/rules/order'\nimport security from 'solhint/lib/rules/security'\nimport deprecations from 'solhint/lib/rules/deprecations'\nimport miscellaneous from 'solhint/lib/rules/miscellaneous'\nimport { customAction } from '@remixproject/plugin-api'\n\ntype Report = {\n  line: number,\n  column: number,\n  severity: string,\n  message: string,\n  ruleId: string,\n  fix: string\n}\n\nconst Config = `{\n  \"extends\": \"solhint:recommended\",\n  \"plugins\": [],\n  \"rules\": {\n    \"avoid-suicide\": \"error\",\n    \"avoid-sha3\": \"warn\"\n  }\n}`\n\nexport class SolHint extends PluginClient {\n  triggerLinter: boolean\n  constructor() {\n    super()\n    this.methods = ['lintContract', 'lintOnCompilation', 'lintContractCustomAction', 'lint']\n    createClient(this)\n    this.onload().then(async () => {\n      await this.lintOnCompilation()\n    })\n  }\n  async createConfigFile () {\n    await this.call('fileManager', 'writeFile', '.solhint.json', Config)\n  }\n\n  async lintOnCompilation() {\n    if (!this.triggerLinter) return\n    this.on('solidity', 'compilationFinished', async (fileName, source, languageVersion, data) => {\n      const hints = await this.lint(fileName)\n      console.log('after compile', { hints })\n      this.emit('lintOnCompilationFinished', hints)\n    })\n    this.triggerLinter = false\n  }\n  /**\n   * method to handle context menu action in file explorer for\n   * solhint plugin\n   * @param action interface CustomAction\n   */\n  async lintContractCustomAction(action: customAction) {\n    this.triggerLinter = true\n    await this.call('solidity', 'compile', action.path[0])\n    await this.lintContract(action.path[0])\n  }\n\n  async lintContract(file: string) {\n    const hints = await this.lint(file)\n    this.emit('lintingFinished', hints)\n  }\n\n  public async lint(fileName: string) {\n    const content = await this.call('fileManager', 'readFile', fileName)\n    let configContent = Config\n    if (await this.call('fileManager' as any, 'exists', '.solhint.json')) {\n      configContent = await this.call('fileManager', 'readFile', '.solhint.json')\n    }\n    const configContentObj = JSON.parse(configContent)\n    // apply the extend property\n    const rulesObj = applyExtends(configContentObj, (path) => this.rules[path]())\n    configContentObj.rules = { ...rulesObj, ...configContentObj.rules }\n    configContentObj.extends = []\n\n    const reporters = processStr(content, configContentObj)\n\n    const reports: Array<Report> = reporters.reports\n    const hints = reports.map((report: Report) => {\n      return {\n        formattedMessage: `${report.message}\\n ${report.fix ? report.fix : ''}`,\n        type: this.severity[report.severity] || 'error',\n        column: report.column,\n        line: report.line - 1,\n        message: report.message,\n        ruleId: report.ruleId,\n        severity: report.severity,\n        fix: report.fix\n      }\n    })\n\n    this.emit('lintingFinished', hints)\n    return hints\n  }\n\n  severity = {\n    2: 'error',\n    3: 'warning'\n  }\n\n  rules = {\n    'solhint:recommended': () => {\n      const enabledRules = {}\n      this.coreRules().forEach(rule => {\n        if (!rule.meta.deprecated && rule.meta.recommended) {\n          enabledRules[rule.ruleId] = rule.meta.defaultSetup\n        }\n      })\n      return enabledRules\n    },\n    'solhint:all': () => {\n      const enabledRules = {}\n      this.coreRules().forEach(rule => {\n        if (!rule.meta.deprecated) {\n          enabledRules[rule.ruleId] = rule.meta.defaultSetup\n        }\n      })\n      return enabledRules\n    },\n    'solhint:default': () => {\n      const enabledRules = {}\n      this.coreRules().forEach(rule => {\n        if (!rule.meta.deprecated && rule.meta.isDefault) {\n          enabledRules[rule.ruleId] = rule.meta.defaultSetup\n        }\n      })\n      return enabledRules\n    }\n  }\n\n  coreRules() {\n    return [\n      ...bestPractises(),\n      ...deprecations(),\n      ...miscellaneous(),\n      ...naming(),\n      ...order(),\n      ...security()\n    ]\n  }\n\n}\n\n","import React from 'react'\nimport { createRoot } from 'react-dom/client';\nimport App from './app/App'\n\nconst container = document.getElementById('root');\n\nif (container) {\n  createRoot(container).render(<React.StrictMode>\n    <App />\n  </React.StrictMode>);\n}\n","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */","/* (ignored) */"],"names":["client","SolHint","App","Config","enabledRules","coreRules","forEach","rule","meta","deprecated","recommended","ruleId","defaultSetup","isDefault","methods","createClient","onload","then","lintOnCompilation","call","triggerLinter","on","fileName","source","languageVersion","data","lint","hints","console","log","emit","action","path","lintContract","file","content","configContent","configContentObj","JSON","parse","rulesObj","applyExtends","rules","reporters","processStr","reports","map","report","formattedMessage","message","fix","type","severity","column","line","bestPractises","deprecations","miscellaneous","naming","order","security","PluginClient","container","document","getElementById","createRoot","render"],"sourceRoot":""}