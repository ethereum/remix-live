"use strict";(self["webpackChunk"]=self["webpackChunk"]||[]).push([[179],{957:(__unused_webpack_module,exports,__webpack_require__)=>{var _typeof=__webpack_require__(2886);Object.defineProperty(exports,"__esModule",{value:true});exports["default"]=void 0;var _react=_interopRequireWildcard(__webpack_require__(7182));var _circomPluginClient=__webpack_require__(8646);var _jsxRuntime=__webpack_require__(7659);function _getRequireWildcardCache(nodeInterop){if(typeof WeakMap!=="function")return null;var cacheBabelInterop=new WeakMap;var cacheNodeInterop=new WeakMap;return(_getRequireWildcardCache=function _getRequireWildcardCache(nodeInterop){return nodeInterop?cacheNodeInterop:cacheBabelInterop})(nodeInterop)}function _interopRequireWildcard(obj,nodeInterop){if(!nodeInterop&&obj&&obj.__esModule){return obj}if(obj===null||_typeof(obj)!=="object"&&typeof obj!=="function"){return{default:obj}}var cache=_getRequireWildcardCache(nodeInterop);if(cache&&cache.has(obj)){return cache.get(obj)}var newObj={};var hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var key in obj){if(key!=="default"&&Object.prototype.hasOwnProperty.call(obj,key)){var desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null;if(desc&&(desc.get||desc.set)){Object.defineProperty(newObj,key,desc)}else{newObj[key]=obj[key]}}}newObj["default"]=obj;if(cache){cache.set(obj,newObj)}return newObj}function App(){(0,_react.useEffect)((function(){new _circomPluginClient.CircomPluginClient}),[]);return(0,_jsxRuntime.jsx)("div",{className:"App"})}var _default=App;exports["default"]=_default},8646:(__unused_webpack_module,exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(7085);Object.defineProperty(exports,"__esModule",{value:true});exports.CircomPluginClient=void 0;var _regenerator=_interopRequireDefault(__webpack_require__(9454));var _asyncToGenerator2=_interopRequireDefault(__webpack_require__(1544));var _classCallCheck2=_interopRequireDefault(__webpack_require__(2830));var _createClass2=_interopRequireDefault(__webpack_require__(9152));var _assertThisInitialized2=_interopRequireDefault(__webpack_require__(9451));var _inherits2=_interopRequireDefault(__webpack_require__(9346));var _possibleConstructorReturn2=_interopRequireDefault(__webpack_require__(5268));var _getPrototypeOf2=_interopRequireDefault(__webpack_require__(3910));var _defineProperty2=_interopRequireDefault(__webpack_require__(6604));var _plugin=__webpack_require__(481);var _pluginWebview=__webpack_require__(8522);var _events=_interopRequireDefault(__webpack_require__(3683));var _path=_interopRequireDefault(__webpack_require__(6442));var _circom_wasm=__webpack_require__(3632);function _createForOfIteratorHelper(o,allowArrayLike){var it=typeof Symbol!=="undefined"&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&typeof o.length==="number"){if(it)o=it;var i=0;var F=function F(){};return{s:F,n:function n(){if(i>=o.length)return{done:true};return{done:false,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var normalCompletion=true,didErr=false,err;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();normalCompletion=step.done;return step},e:function e(_e2){didErr=true;err=_e2},f:function f(){try{if(!normalCompletion&&it["return"]!=null)it["return"]()}finally{if(didErr)throw err}}}}function _unsupportedIterableToArray(o,minLen){if(!o)return;if(typeof o==="string")return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);if(n==="Object"&&o.constructor)n=o.constructor.name;if(n==="Map"||n==="Set")return Array.from(o);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}function _arrayLikeToArray(arr,len){if(len==null||len>arr.length)len=arr.length;for(var i=0,arr2=new Array(len);i<len;i++){arr2[i]=arr[i]}return arr2}function _createSuper(Derived){var hasNativeReflectConstruct=_isNativeReflectConstruct();return function _createSuperInternal(){var Super=(0,_getPrototypeOf2["default"])(Derived),result;if(hasNativeReflectConstruct){var NewTarget=(0,_getPrototypeOf2["default"])(this).constructor;result=Reflect.construct(Super,arguments,NewTarget)}else{result=Super.apply(this,arguments)}return(0,_possibleConstructorReturn2["default"])(this,result)}}function _isNativeReflectConstruct(){if(typeof Reflect==="undefined"||!Reflect.construct)return false;if(Reflect.construct.sham)return false;if(typeof Proxy==="function")return true;try{Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})));return true}catch(e){return false}}var CircomPluginClient=function(_PluginClient){(0,_inherits2["default"])(CircomPluginClient,_PluginClient);var _super=_createSuper(CircomPluginClient);function CircomPluginClient(){var _this;(0,_classCallCheck2["default"])(this,CircomPluginClient);_this=_super.call(this);(0,_defineProperty2["default"])((0,_assertThisInitialized2["default"])(_this),"internalEvents",void 0);(0,_pluginWebview.createClient)((0,_assertThisInitialized2["default"])(_this));_this.internalEvents=new _events["default"];_this.methods=["init","parse"];_this.onload();return _this}(0,_createClass2["default"])(CircomPluginClient,[{key:"init",value:function init(){console.log("initializing circom plugin...")}},{key:"onActivation",value:function onActivation(){var _this2=this;this.on("editor","contentChanged",(function(path,fileContent){if(path.endsWith(".circom")){_this2.parse(path,fileContent)}}))}},{key:"parse",value:function(){var _parse2=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark((function _callee(path,fileContent){var buildFiles,parsedOutput,result,markers,_iterator,_step,report,label,startPosition,endPosition;return _regenerator["default"].wrap((function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:buildFiles=(0,_defineProperty2["default"])({},path,fileContent);_context.next=3;return this.resolveDependencies(path,fileContent,buildFiles);case 3:buildFiles=_context.sent;parsedOutput=(0,_circom_wasm.parse)(path,buildFiles);_context.prev=5;result=JSON.parse(parsedOutput);if(!(result.length===0)){_context.next=12;break}_context.next=10;return this.call("editor","clearErrorMarkers",[path]);case 10:_context.next=48;break;case 12:markers=[];_iterator=_createForOfIteratorHelper(result);_context.prev=14;_iterator.s();case 16:if((_step=_iterator.n()).done){_context.next=33;break}report=_step.value;_context.t0=_regenerator["default"].keys(report.labels);case 19:if((_context.t1=_context.t0()).done){_context.next=31;break}label=_context.t1.value;if(!(report.labels[label].file_id==="0")){_context.next=29;break}_context.next=24;return this.call("editor","getPositionAt",report.labels[label].range.start);case 24:startPosition=_context.sent;_context.next=27;return this.call("editor","getPositionAt",report.labels[label].range.end);case 27:endPosition=_context.sent;markers.push({message:report.message,severity:report.type.toLowerCase(),position:{start:{line:startPosition.lineNumber,column:startPosition.column},end:{line:endPosition.lineNumber,column:endPosition.column}},file:path});case 29:_context.next=19;break;case 31:_context.next=16;break;case 33:_context.next=38;break;case 35:_context.prev=35;_context.t2=_context["catch"](14);_iterator.e(_context.t2);case 38:_context.prev=38;_iterator.f();return _context.finish(38);case 41:if(!(markers.length>0)){_context.next=46;break}_context.next=44;return this.call("editor","addErrorMarker",markers);case 44:_context.next=48;break;case 46:_context.next=48;return this.call("editor","clearErrorMarkers",[path]);case 48:_context.next=53;break;case 50:_context.prev=50;_context.t3=_context["catch"](5);console.log(_context.t3);case 53:case"end":return _context.stop()}}}),_callee,this,[[5,50],[14,35,38,41]])})));function parse(_x,_x2){return _parse2.apply(this,arguments)}return parse}()},{key:"resolveDependencies",value:function(){var _resolveDependencies=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark((function _callee3(filePath,fileContent){var _this3=this;var output,depPath,blackPath,includes,_args3=arguments;return _regenerator["default"].wrap((function _callee3$(_context3){while(1){switch(_context3.prev=_context3.next){case 0:output=_args3.length>2&&_args3[2]!==undefined?_args3[2]:{};depPath=_args3.length>3&&_args3[3]!==undefined?_args3[3]:"";blackPath=_args3.length>4&&_args3[4]!==undefined?_args3[4]:[];includes=(fileContent.match(/include ['"].*['"]/g)||[]).map((function(include){return include.replace(/include ['"]/g,"").replace(/['"]/g,"")}));_context3.next=6;return Promise.all(includes.map(function(){var _ref=(0,_asyncToGenerator2["default"])(_regenerator["default"].mark((function _callee2(include){var dependencyContent,path,pathExists,relativePath,relativePathExists,splitInclude,version,dependencyIncludes;return _regenerator["default"].wrap((function _callee2$(_context2){while(1){switch(_context2.prev=_context2.next){case 0:if(!blackPath.includes(include)){_context2.next=2;break}return _context2.abrupt("return");case 2:dependencyContent="";path=include;_context2.next=6;return _this3.call("fileManager","exists",path);case 6:pathExists=_context2.sent;if(!pathExists){_context2.next=13;break}_context2.next=10;return _this3.call("fileManager","readFile",path);case 10:dependencyContent=_context2.sent;_context2.next=51;break;case 13:relativePath=_path["default"].resolve(filePath.slice(0,filePath.lastIndexOf("/")),include);if(relativePath.indexOf("/")===0)relativePath=relativePath.slice(1);_context2.next=17;return _this3.call("fileManager","exists",relativePath);case 17:relativePathExists=_context2.sent;if(!relativePathExists){_context2.next=24;break}_context2.next=21;return _this3.call("fileManager","readFile",relativePath);case 21:dependencyContent=_context2.sent;_context2.next=51;break;case 24:if(!depPath){_context2.next=32;break}path=_path["default"].resolve(depPath.slice(0,depPath.lastIndexOf("/")),include);if(path.indexOf("/")===0)path=path.slice(1);_context2.next=29;return _this3.call("contentImport","resolveAndSave",path,null);case 29:dependencyContent=_context2.sent;_context2.next=51;break;case 32:if(!include.startsWith("circomlib")){_context2.next=48;break}splitInclude=include.split("/");version=splitInclude[1].match(/v[0-9]+.[0-9]+.[0-9]+/g);if(!(version&&version[0])){_context2.next=42;break}path="https://raw.githubusercontent.com/iden3/circomlib/".concat(version[0],"/circuits/").concat(splitInclude.slice(2).join("/"));_context2.next=39;return _this3.call("contentImport","resolveAndSave",path,null);case 39:dependencyContent=_context2.sent;_context2.next=46;break;case 42:path="https://raw.githubusercontent.com/iden3/circomlib/master/circuits/".concat(splitInclude.slice(1).join("/"));_context2.next=45;return _this3.call("contentImport","resolveAndSave",path,null);case 45:dependencyContent=_context2.sent;case 46:_context2.next=51;break;case 48:_context2.next=50;return _this3.call("contentImport","resolveAndSave",path,null);case 50:dependencyContent=_context2.sent;case 51:dependencyIncludes=(dependencyContent.match(/include ['"].*['"]/g)||[]).map((function(include){return include.replace(/include ['"]/g,"").replace(/['"]/g,"")}));blackPath.push(include);if(!(dependencyIncludes.length>0)){_context2.next=59;break}_context2.next=56;return _this3.resolveDependencies(filePath,dependencyContent,output,path,blackPath);case 56:output[include]=dependencyContent;_context2.next=60;break;case 59:output[include]=dependencyContent;case 60:case"end":return _context2.stop()}}}),_callee2)})));return function(_x5){return _ref.apply(this,arguments)}}()));case 6:return _context3.abrupt("return",output);case 7:case"end":return _context3.stop()}}}),_callee3)})));function resolveDependencies(_x3,_x4){return _resolveDependencies.apply(this,arguments)}return resolveDependencies}()}]);return CircomPluginClient}(_plugin.PluginClient);exports.CircomPluginClient=CircomPluginClient},2002:(__unused_webpack_module,__unused_webpack_exports,__webpack_require__)=>{var _interopRequireDefault=__webpack_require__(7085);var _react=_interopRequireDefault(__webpack_require__(7182));var _reactDom=_interopRequireDefault(__webpack_require__(3521));var _app=_interopRequireDefault(__webpack_require__(957));var _jsxRuntime=__webpack_require__(7659);_reactDom["default"].render((0,_jsxRuntime.jsx)(_app["default"],{}),document.getElementById("root"))}},__webpack_require__=>{var __webpack_exec__=moduleId=>__webpack_require__(__webpack_require__.s=moduleId);__webpack_require__.O(0,[736],(()=>__webpack_exec__(2002)));var __webpack_exports__=__webpack_require__.O()}]);